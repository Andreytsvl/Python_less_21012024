def read_phonebook():
    phonebook = []
    with open("phon.txt", "r", encoding='utf-8') as file:
        for line in file:
            # Разделяем строку на части и создаем словарь
            last_name, first_name, phone_number, description = line.strip().split(",")
            entry = {
                "last_name": last_name,
                "first_name": first_name,
                "phone_number": phone_number,
                "description": description
            }
            #print(entry) #что такое энтри?
            # Добавляем словарь в список
            phonebook.append(entry)
     
    return phonebook

# Сохраняем результат вызова функции в переменную
phonebook = read_phonebook()

# Теперь можно печатать переменную phonebook
#print(phonebook)

def show_phonebook(phonebook):
    print("\nВесь справочник:")
    for entry in phonebook:
        print("Фамилия:", entry["last_name"])
        print("Имя:", entry["first_name"])
        print("Номер телефона:", entry["phone_number"])
        print("Описание:", entry["description"])
        print("----------------------")  

#show_phonebook(phonebook) #проверили, что работает
print("\nВыберите необходимое действие:\n"
        "1. Отобразить весь справочник\n"
        "2. Найти абонента по фамилии\n"
        "3. Найти абонента по номеру телефона\n"
        "4. Добавить абонента в справочник\n"
        "5. Сохранить справочник в текстовом формате\n"
        "6. Закончить работу")
choice = int(input())

def search_by_last_name(phonebook, last_name):
    results = []
    for entry in phonebook:
        if entry["last_name"] == last_name:
            results.append(entry)
    return results

def search_by_phone_number(phonebook, phone_number):
    results = []
    for entry in phonebook:
        if entry["phone_number"] == phone_number:
            results.append(entry)
    return results

def add_entry(phonebook, last_name, first_name, phone_number, description):
    entry = {
        "last_name": last_name,
        "first_name": first_name,
        "phone_number": phone_number,
        "description": description
    }
    phonebook.append(entry)
    print('вы желаете сохранить данные? Введите 1, если да')
    a= int(input())
    if a == 1:
        save_phonebook(phonebook)
    else:
        print('ну, как хотите')
        
    
def save_phonebook(phonebook):
    with open("phon.txt", "w", encoding='utf-8') as file:
        for entry in phonebook:
            line = "{},{},{},{}\n".format(entry["last_name"], entry["first_name"], entry["phone_number"], entry["description"])
            file.write(line)

def execute_action(choice):
    if choice == 1:
        show_phonebook(phonebook)
    elif choice == 2:
        last_name = input("Введите фамилию для поиска: ")
        results = search_by_last_name(phonebook, last_name)
        show_phonebook(results)
        # первый комит
    elif choice == 3:
        phone_number = input("Введите номер телефона для поиска: ")
        results = search_by_phone_number(phonebook, phone_number)
        show_phonebook(results)
        
    elif choice == 4:
        last_name = input('введите фамилию ')
        first_name = input('введите имя ')
        phone_number = input('введите номер телефона ')
        description = input('введите описание ')
        add_entry(phonebook, last_name, first_name, phone_number, description)
        #print(phonebook)# проверим, записалось ли
        #комит 2
    elif choice == 5:
        save_phonebook(phonebook)
        #комит 3
    elif choice == 6:
        print("Завершение работы...")
        # Здесь можно написать код для закрытия программы
        #file.close("phon.txt")
    else:
        print("Неверный выбор. Повторите попытку.")
        
execute_action(choice)


